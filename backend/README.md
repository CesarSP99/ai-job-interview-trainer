# ğŸ“„ AI Interview Coach & Smart Resume Matcher (FastAPI + Gemini + Whisper + Embeddings)

This project is a fully integrated **AI-powered career preparation platform** that combines:

- ğŸ“„ **Smart Resume Parsing & Job Matching**
- ğŸ¤ **AI Interview Training (text + voice)**
- ğŸ§  **Sentiment + Emotion Analysis**
- ğŸ¤– **Adaptive LLM-driven interview flow**
- ğŸ“Š **Explainable evaluation and feedback**

Built with **FastAPI**, **Gemini 2.5 Flash**, **Faster-Whisper**, **SBERT embeddings**, and **SQLite**.

---

## ğŸš€ Key Features

### ğŸ” **Resume â†’ Job Matching**
- PDF resume parsing with `PyMuPDF`
- Skill extraction using **Gemini (with local Mistral fallback via Ollama)**
- Job embeddings using **MiniLM (SentenceTransformers)**
- Hybrid ranking:
  - SBERT cosine similarity  
  - + Gemini LLM re-ranking with explicit match reasons
- Word cloud generation for resume insight
- Salary trend analysis per job category

---

### ğŸ¤ **AI Interview Training (New!)**
The user can click **â€œTrain for this jobâ€** and start an interview simulation.

#### Includes:
- Unified endpoint for **text or voice** responses
- **Whisper audio transcription** (Faster-Whisper small model)
- **Sentiment analysis** with `distilbert-base-uncased-finetuned-sst-2-english`
- **Emotion classification** with RoBERTa (`j-hartmann/emotion-english-distilroberta-base`)
- Adaptive follow-up questions generated by **Gemini 2.5 Flash**
- Full conversation history stored in SQLite
- **Explainable final evaluation** powered by Gemini:
  - Score
  - Strengths
  - Weaknesses
  - Actionable guidance
  - Sentiment/emotion insights

---

## ğŸ§± Project Structure

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                   # FastAPI API routes
â”‚   â”‚   â”œâ”€â”€ resume.py          # Resume parsing + job matching
â”‚   â”‚   â”œâ”€â”€ jobs.py            # Job CRUD & search
â”‚   â”‚   â””â”€â”€ interview_train.py # Interview session API (text + audio)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ interview_service.py # Interview flow logic
â”‚   â”‚   â”œâ”€â”€ llm.py               # Gemini client, prompts
â”‚   â”‚   â”œâ”€â”€ audio.py             # Whisper STT + sentiment/emotion
â”‚   â”‚   â””â”€â”€ extract_skills.py    # Resume skill extraction pipeline
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ database.py          # SQLite + SQLAlchemy setup
â”‚   â”‚   â””â”€â”€ migrations/          # Alembic migration scripts
â”‚   â”œâ”€â”€ models/                  # SQLAlchemy ORM models
â”‚   â”œâ”€â”€ schemas/                 # Pydantic request/response models
â”‚   â””â”€â”€ main.py                  # FastAPI entrypoint
â”œâ”€â”€ alembic/                     # Migration env
â”œâ”€â”€ app.db                       # SQLite DB (local)
â”œâ”€â”€ Dockerfile
â””â”€â”€ requirements.txt
```

---

## ğŸ§ª Local Development

### 1. Clone the Repository

```bash
git clone ai-job-interview-trainer
cd ai-job-interview-trainer/backend
```

### 2. Create Environment

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python -m spacy download en_core_web_sm
```

### 3. Run the API

```bash
uvicorn app.main:app --reload
```

Visit **http://127.0.0.1:8000/docs** for Swagger UI.

---

## âš™ï¸ Environment Setup

Create a `.env` file:

```env
GEMINI_API_KEY=your-key
```

Optional (for fallback):
- Install **Ollama**
- Run `ollama serve`

---

## ğŸ¤ Interview Training Endpoints

### `POST /interview/start`
Starts a new interview session.

### `POST /interview/message`
Unified text + audio endpoint.

Send either:
- `text="..."`  
or  
- `file=<audio>.wav`

### `POST /interview/evaluate`
Generates final structured interview evaluation.

---

## ğŸ”„ Matching Logic Summary

1. Extract text from resume  
2. Extract skills via Gemini & fallback LLM  
3. Compute SBERT embeddings  
4. Filter + score jobs  
5. Rerank with Gemini (structured output)  
6. Generate word cloud and salary insights  

---

## ğŸ¤ Interview Logic Summary

1. User selects job â†’ backend starts session  
2. Gemini generates first question  
3. User responds via **text or voice**  
4. Whisper â†’ transcription  
5. Sentiment & emotions extracted  
6. Stored in database  
7. Gemini analyzes context â†’ next question  
8. User clicks â€œFinishâ€ â†’ Gemini produces final evaluation  

---

## ğŸ³ Docker Deployment

```bash
docker build -t interview-api .
docker run -d -p 8000:8000 -v /path/app.db:/app/app.db interview-api
```

---

## ğŸ“š License
MIT License
